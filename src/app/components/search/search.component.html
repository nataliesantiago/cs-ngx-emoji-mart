<div class="contendor-logo" *ngIf="modo==2">
  <a [routerLink]="['/home']">
    <img [src]="url_logo" alt="imagen" class="img-buscador" *ngIf="url_logo" />
  </a>
</div>
<div class="search-bar"
  [ngClass]="{'barra-superior':modo==0,'barra-izquierda':modo==2,'up':!modo,'panel-lateral':modo==3}">
  <button mat-icon-button (click)="buscar(1)">
    <mat-icon class="buscar-lupa">search</mat-icon>
  </button>

  <input id="file-input" (change)="onFileSelected($event)" type="file" #adjunto />


  <div class="ng-autocomplete">
    <!--<ng-autocomplete id="ng-autocomplete-search" placeHolder="{{search_placeholder}}" [data]="sugerencias"
      (selected)='selectEvent($event)' (keydown.enter)="buscar(1)" [formControl]="def" [notFoundTemplate]="'No hay resultados'"
      (inputCleared)="clearOptions()" #autocomplete>
    </ng-autocomplete>
  -->
    <mat-form-field class="caja-buscador">

      <input type="text" [placeholder]="search_placeholder" matInput (keydown.enter)="buscar(1)" [formControl]="def" floatLabel="never" (focus)="mostrando_sugerencia=true" (blur)="soltarCaja()"
        floatPlaceholder="never" #primero (keydown.Tab)="completarTexto($event)" [matAutocomplete]="auto"
        autocomplete="off" (keydown)="limpiarSugerencia()">
      <input #segundo class="contenido" [formControl]="defo" matInput [hidden]="!mostrando_sugerencia"  />
      <button mat-button *ngIf="def.value" matSuffix mat-icon-button aria-label="Clear"
        (click)="def.setValue('');texto_sugerido=null;">
        <mat-icon>close</mat-icon>
      </button>
      <mat-autocomplete #auto="matAutocomplete" (optionSelected)='selectEvent($event.option.value)'>
        <mat-option *ngFor="let option of sugerencias" [value]="option">
          {{option.suggestedQuery}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <!-- <ng-template #notFoundTemplate let-notFound>
            <div [innerHTML]="textError"></div>
        </ng-template> -->
  </div>
  <button mat-icon-button class="archivo" *ngIf="modo!=3" (click)="adjunto.click()">
    <mat-icon>photo_camera</mat-icon>
  </button>
  <button mat-icon-button (click)="iniciarReconocimientoVoz($event)" class="microfono"
    [ngClass]="{'escuchando':recognizing}">
    <mat-icon id="microphone-icon" *ngIf="recognition">
      mic</mat-icon>
  </button>
</div>
<div class="contendor-general-respuestas">
  <div *ngIf="modo==3" class="panel-respuestas">
    <div class="contenedor-respuestas" *ngIf="!cargando_respuestas">
      <perfect-scrollbar>
        <div *ngFor="let r of resultados; let i = index" class="contenedor__texto center">
          <app-resultado-search [respuesta]="r" [pos]="i+1" [busqueda]="busqueda" [modo]="modo"></app-resultado-search>
        </div>
        <h3 *ngIf="resultados && resultados.length<1" class="sin-resultados">No hay resultados</h3>
      </perfect-scrollbar>
    </div>
    <mat-paginator [length]="length" [hidePageSize]="true" (page)="paginar($event)" [pageIndex]="page"
      [showFirstLastButtons]="true" *ngIf="!cargando_respuestas && length>10" [pageSize]="10">
    </mat-paginator>
    <mat-progress-spinner class="spinner-cargando-respuestas" [mode]="'indeterminate'" [diameter]="68"
      *ngIf="cargando_respuestas">
    </mat-progress-spinner>
  </div>
</div>